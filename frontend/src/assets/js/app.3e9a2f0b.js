(function(e){function t(t){for(var o,c,a=t[0],s=t[1],u=t[2],d=0,m=[];d<a.length;d++)c=a[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&m.push(r[c][0]),r[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={app:0},i=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r={class:"container"};function i(e,t,n,i,c,a){var s=Object(o["resolveComponent"])("Header"),u=Object(o["resolveComponent"])("router-view"),l=Object(o["resolveComponent"])("Footer"),d=Object(o["resolveComponent"])("Notifications");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(s),Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(u)]),Object(o["createVNode"])(l),Object(o["createVNode"])(d)],64)}var c={class:"nav"},a={class:"branding"},s=Object(o["createTextVNode"])("Todo"),u={class:"nav-actions"};function l(e,t,n,r,i,l){var d=Object(o["resolveComponent"])("router-link"),m=Object(o["resolveComponent"])("HeaderLink");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createElementVNode"])("div",a,[Object(o["createVNode"])(d,{to:"/"},{default:Object(o["withCtx"])((function(){return[s]})),_:1})]),Object(o["createElementVNode"])("div",u,[l.isAuthenticated?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,name:"Logout",onClick:t[0]||(t[0]=function(e){return l.logout()}),path:"#"})):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])(m,{name:"Login",path:"/login"}),Object(o["createVNode"])(m,{name:"Sign up",path:"/sign-up"})],64))])])}n("498a"),n("d3b7"),n("e9c4");var d=n("be92"),m=(n("c740"),n("a434"),Object(d["b"])("notifications",{state:function(){return{notifications:[],notificationIndex:1}},actions:{notify:function(e,t){var n=this,o=this.notificationIndex;this.notifications.push({message:e,type:t,id:o}),++this.notificationIndex,setTimeout((function(){var e=n.notifications.findIndex((function(e){return e.id===o}));-1!==e&&n.notifications.splice(e,1)}),5e3)},success:function(e){this.notify(e,"success")},danger:function(e){this.notify(e,"danger")},info:function(e){this.notify(e,"info")},warning:function(e){this.notify(e,"warning")}}})),p=n("1da1"),f=(n("96cf"),n("b0c0"),n("6c02")),h={class:"container"},b={class:"container my-5"},v=Object(o["createElementVNode"])("div",{class:"container my-5"},[Object(o["createElementVNode"])("h5",{class:"text-underline"},"Today's quote"),Object(o["createElementVNode"])("p",null," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Atque recusandae minima libero! Totam tenetur vel nesciunt odio provident reiciendis, cupiditate nemo fugit incidunt repudiandae consequuntur sequi dolore inventore laboriosam amet! ")],-1);function g(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("TodoContainer"),s=Object(o["resolveComponent"])("AddTodoForm");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[Object(o["createVNode"])(a),Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("button",{title:"toggle add task form",onClick:t[0]||(t[0]=function(){return c.toggleTodo&&c.toggleTodo.apply(c,arguments)}),class:"btn-white"}," Add Task ")]),v,Object(o["createVNode"])(s,{ref:"addTodoForm"},null,512)])}var j={key:0,class:"modal"},O={class:"form-region"},k=Object(o["createElementVNode"])("label",{for:"task-name"},"Name",-1),T=Object(o["createElementVNode"])("button",{type:"submit",class:"add-task-btn waves-effect waves-light"},[Object(o["createElementVNode"])("span",{class:"fa fa-plus"})],-1);function E(e,t,n,r,i,c){return i.formVisible?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",j,[Object(o["createElementVNode"])("form",{id:"modal-form",onSubmit:t[2]||(t[2]=function(){return c.addTodoItem&&c.addTodoItem.apply(c,arguments)})},[Object(o["createElementVNode"])("div",O,[k,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{ref:"textBox",class:"todo-text",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.text=e}),id:"task-name"},null,512),[[o["vModelText"],i.text]]),T,Object(o["createElementVNode"])("span",{onClick:t[1]||(t[1]=function(e){return c.toggleVisibility()}),class:"fa fa-times close-todo-form"})])],32)])):Object(o["createCommentVNode"])("",!0)}var V,N=n("ade3"),y=n("5530"),w=(n("d81d"),Object(d["b"])("todoItems",{state:function(){return{todoItems:[],todosFetchedFromServer:!1}},getters:{todos:function(){return this.todoItems}},actions:{setTodos:function(e){this.todos=e},getTodosPromise:function(){return Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=rt(),n="".concat("http://localhost:8000","/api/v1/todos/"),t.userAuthenticated){e.next=5;break}return e.next=5,t.performServerSideValidation();case 5:return o=t.getAccessToken(),e.abrupt("return",fetch(n,{method:"GET",headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()})));case 7:case"end":return e.stop()}}),e)})))()},fetchTodos:function(){var e=this;this.todosFetchedFromServer||this.getTodosPromise().then((function(t){return e.todoItems=t}),(function(t){if(401===t){var n=rt();n.performServerSideValidation().then(e.getTodosPromise().then((function(t){e.todoItems=t}),(function(e){})))}var o=m();o.danger("Error occured while fetching data. logout and try again")})).catch((function(e){return console.log(e)}))},addTodo:function(e){this.todoItems.push(e)},deleteTodo:function(e){var t=this.todoItems.findIndex((function(t){return t.id===e}));-1!==t&&this.todoItems.splice(t,1)},updateTodo:function(e,t){this.todoItems=this.todoItems.map((function(n){return n.id===e&&(n.done=t),n}))}}})),S=(V={setup:function(){var e=m(),t=rt(),n=w();return{notifier:e,auth:t,todoStore:n}},name:"AddTodoForm",data:function(){return{text:""}}},Object(N["a"])(V,"data",(function(){return{formVisible:!1}})),Object(N["a"])(V,"methods",{toggleVisibility:function(){var e=this;this.formVisible=!this.formVisible,this.formVisible&&setTimeout((function(){e.$refs.textBox.focus()}),200)},postTodoItem:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.auth.getAccessToken(),r="".concat("http://localhost:8000","/api/v1/todo/"),n.abrupt("return",fetch(r,{method:"POST",body:JSON.stringify({name:e}),headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()})));case 3:case"end":return n.stop()}}),n)})))()},addTodoItem:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.preventDefault(),o=t.text.trim(),o||t.notifier.danger("Todo name cannot be empty"),!t.auth.accessTokenExpired()){n.next=6;break}return n.next=6,t.auth.performServerSideValidation();case 6:t.postTodoItem(o).then((function(e){var n=Object(y["a"])({},e);t.todoStore.addTodo(n),t.text=""}),(function(e){401===e&&t.auth.performServerSideValidation().then((function(){t.postTodoItem(o).then((function(e){var n=Object(y["a"])({},e);t.todoStore.addTodo(n),t.text=""}),(function(e){t.notifier.danger("Todo item addition failed")}))}))})).catch((function(e){return console.log(e)}));case 7:case"end":return n.stop()}}),n)})))()}}),V),x=n("6b0d"),B=n.n(x);const A=B()(S,[["render",E]]);var C=A,I={class:"container my-5"};function q(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("Todo");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",I,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(i.todos,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:e.id,name:e.name,done:e.done,id:e.id},null,8,["name","done","id"])})),128))])}var P={class:"markers"};function L(e,t,n,r,i,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["todo-item",n.done?"todo-item-done":"todo-item-undone"])},[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(n.name),1),Object(o["createElementVNode"])("p",P,[n.done?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:0,title:"mark as undone",class:"fa fa-check cursor-pointer",onClick:t[0]||(t[0]=function(e){return c.updateTodo()})})):Object(o["createCommentVNode"])("",!0),n.done?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:1,title:"mark as done",class:"fa fa-clock cursor-pointer",onClick:t[1]||(t[1]=function(e){return c.updateTodo()})})),Object(o["createElementVNode"])("i",{title:"delete item",class:"fa fa-times delete-task",onClick:t[2]||(t[2]=function(e){return c.deleteTodo()})})])],2)}n("a9e3"),n("99af");var F={setup:function(){return{todoStore:w(),auth:rt(),notifier:m()}},name:"Todo",props:{name:{type:String,required:!0},done:{type:Boolean,required:!0},id:{type:Number,required:!0}},methods:{performServerRequest:function(e){var t=this,n=e.toLowerCase(),o="update"===n?"PUT":"DELETE",r="".concat("http://localhost:8000","/api/v1/todo/").concat(this.id,"/"),i=this.auth.getAccessToken();fetch(r,{method:o,headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(i)}}).then((function(e){return 200!==e.status?Promise.reject({message:"Error occured while updating todo item"}):e.json()})).then((function(e){"update"===n?t.todoStore.updateTodo(e.id,e.done):t.todoStore.deleteTodo(t.id)}),(function(e){t.notifier.danger(e.message)}))},updateTodo:function(){var e=this;this.auth.accessTokenExpired()?this.auth.performServerSideValidation().then((function(){e.performServerRequest("update")})):this.performServerRequest("update")},deleteTodo:function(){var e=this;this.auth.accessTokenExpired()?this.auth.performServerSideValidation().then((function(){e.performServerRequest("delete")})):this.performServerRequest("delete")}}};const R=B()(F,[["render",L]]);var U=R,D={setup:function(){var e=w();return e.fetchTodos(),{todoStore:e}},name:"TodoContainer",components:{Todo:U},created:function(){var e=this;this.todoStore.$subscribe((function(t,n){e.todos=n.todoItems}))},data:function(){return{todos:[]}}};const M=B()(D,[["render",q]]);var H=M,J={name:"Home",components:{AddTodoForm:C,TodoContainer:H},methods:{toggleTodo:function(){this.$refs.addTodoForm.toggleVisibility()}}};const _=B()(J,[["render",g]]);var z=_,$={class:"row ml-4"},Q={class:"col l4"},G=Object(o["createElementVNode"])("div",{class:"col l1"},null,-1),Y={class:"col l7"},K=Object(o["createElementVNode"])("h4",null,"Testimonials",-1),W={class:"row"},X={class:"testimonial col"},Z={class:"header"},ee=["src"],te=Object(o["createElementVNode"])("div",{class:"content"},[Object(o["createElementVNode"])("h6",null,"John Doe"),Object(o["createElementVNode"])("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit.")],-1),ne={class:"testimonial col"},oe={class:"header"},re=["src"],ie=Object(o["createElementVNode"])("div",{class:"content"},[Object(o["createElementVNode"])("h6",null,"Sam"),Object(o["createElementVNode"])("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit.")],-1),ce={class:"testimonial col"},ae={class:"header"},se=["src"],ue=Object(o["createElementVNode"])("div",{class:"content"},[Object(o["createElementVNode"])("h6",null,"Sam"),Object(o["createElementVNode"])("p",null,"Lorem ipsum dolor sit amet consectetur adipisicing elit.")],-1),le=Object(o["createStaticVNode"])('<div class="fun-facts ml-4"><h5 class="text-underline">Information on setting goals</h5><div class="row"><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote></div><div class="row"><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote></div></div>',1);function de(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("SignUpForm");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",Q,[Object(o["createVNode"])(a)]),G,Object(o["createElementVNode"])("div",Y,[K,Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("div",X,[Object(o["createElementVNode"])("div",Z,[Object(o["createElementVNode"])("img",{class:"testimonial-image",src:i.imageApi+"/images/john.jpg",alt:"john-image"},null,8,ee)]),te]),Object(o["createElementVNode"])("div",ne,[Object(o["createElementVNode"])("div",oe,[Object(o["createElementVNode"])("img",{class:"testimonial-image",src:i.imageApi+"/images/sam.jpg",alt:"john-image"},null,8,re)]),ie]),Object(o["createElementVNode"])("div",ce,[Object(o["createElementVNode"])("div",ae,[Object(o["createElementVNode"])("img",{class:"testimonial-image",src:i.imageApi+"/images/sam.jpg",alt:"john-image"},null,8,se)]),ue])])])]),le],64)}var me={class:"login-form"},pe=Object(o["createElementVNode"])("h5",{class:"text-underline"},"Sign up",-1),fe={class:"form-section"},he=Object(o["createElementVNode"])("label",{for:"username"},"Username",-1),be={class:"form-section"},ve=Object(o["createElementVNode"])("label",{for:"email"},"Email",-1),ge={class:"form-section"},je=Object(o["createElementVNode"])("label",{for:"password"},"Password",-1),Oe={class:"form-section"},ke=Object(o["createElementVNode"])("label",{for:"password-confirmation"},"Confirm Password",-1),Te=Object(o["createElementVNode"])("button",{class:"btn-white"},"Submit",-1);function Ee(e,t,n,r,i,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",me,[pe,Object(o["createElementVNode"])("form",{onSubmit:t[4]||(t[4]=function(){return c.createUser&&c.createUser.apply(c,arguments)})},[Object(o["createElementVNode"])("div",fe,[he,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.username=e}),name:"username",id:"username"},null,512),[[o["vModelText"],i.username]])]),Object(o["createElementVNode"])("div",be,[ve,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return i.email=e}),name:"email",id:"email"},null,512),[[o["vModelText"],i.email]])]),Object(o["createElementVNode"])("div",ge,[je,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return i.password=e}),name:"password",id:"password"},null,512),[[o["vModelText"],i.password]])]),Object(o["createElementVNode"])("div",Oe,[ke,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.passwordConfirmation=e}),type:"password",name:"password-confirmation",id:"password-confirmation"},null,512),[[o["vModelText"],i.passwordConfirmation]])]),Te],32)])}var Ve=n("b85c"),Ne={name:"SignUpForm",setup:function(){return{notifier:m()}},data:function(){return{username:"",email:"",password:"",passwordConfirmation:""}},methods:{createUser:function(e){var t=this;e.preventDefault();var n=this.username.trim(),o=this.email.trim(),r=this.password.trim(),i=this.passwordConfirmation.trim();if(n)if(n.length<3)this.notifier.danger("username must be at least 3 characters long");else if(o)if(r)if(r.length<5)this.notifier.danger("password length cannot be less than five");else if(r===i){var c={username:n,email:o,password:r},a="".concat("http://localhost:8000","/api/v1/users/sign-up/");fetch(a,{method:"POST",body:JSON.stringify(c),headers:{"Content-type":"application/json"}}).then((function(e){return 201!==e.status&&200!==e.status?Promise.reject(e.json()):e.json()})).then((function(e){t.notifier.success("Account creation successful, login to proceed"),t.$router.push("/login")}),(function(e){e.then((function(e){for(var n in e){var o=e[n];if("string"!==typeof o){var r,i=Object(Ve["a"])(o);try{for(i.s();!(r=i.n()).done;){var c=r.value;t.notifier.danger(c)}}catch(a){i.e(a)}finally{i.f()}}else t.notifier.danger(o)}}))})).catch((function(e){return console.log(e)}))}else this.notifier.danger("confirmation password does not match the password");else this.notifier.danger("password cannot be empty");else this.notifier.danger("email cannot be empty");else this.notifier.danger("username cannot be empty")}}};const ye=B()(Ne,[["render",Ee]]);var we=ye,Se={name:"SignUp",components:{SignUpForm:we},setup:function(){return{notifier:m()}},data:function(){return{imageApi:"http://localhost:3000"}}};const xe=B()(Se,[["render",de]]);var Be=xe,Ae={class:"row container"},Ce={class:"col l5"},Ie=Object(o["createStaticVNode"])('<div class="col l2"></div><div class="col l5"><div class="quotes-banner"><h5 class="text-underline">Quotes</h5><div class="section"><blockquote> Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quam perferendis quia nesciunt molestias error recusandae aperiam rerum sapiente iure mollitia, similique, atque rem. Alias, veniam? Incidunt expedita laborum optio inventore! </blockquote></div><div class="section"><blockquote> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quam inventore corporis culpa perspiciatis, voluptas quod error id odit quo ipsam, dicta adipisci vero minus. Asperiores ad vitae expedita eius ipsum! </blockquote></div></div></div>',2);function qe(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("LoginForm");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ae,[Object(o["createElementVNode"])("div",Ce,[Object(o["createVNode"])(a)]),Ie])}var Pe={class:"login-form"},Le=Object(o["createElementVNode"])("h5",{class:"text-underline"},"Log in to continue",-1),Fe={class:"form-section"},Re=Object(o["createElementVNode"])("label",{for:"username"},"Username",-1),Ue={class:"form-section"},De=Object(o["createElementVNode"])("label",{for:"password"},"Password",-1),Me=Object(o["createElementVNode"])("button",{class:"btn-white"},"Submit",-1);function He(e,t,n,r,i,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Pe,[Le,Object(o["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=function(){return c.logIn&&c.logIn.apply(c,arguments)})},[Object(o["createElementVNode"])("div",Fe,[Re,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.username=e}),type:"text",name:"username",id:"username"},null,512),[[o["vModelText"],i.username]])]),Object(o["createElementVNode"])("div",Ue,[De,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.password=e}),type:"password",name:"password",id:"password"},null,512),[[o["vModelText"],i.password]])]),Me],32)])}var Je={setup:function(){return{notifier:m(),auth:rt()}},name:"LoginForm",data:function(){return{username:"",password:""}},methods:{logIn:function(e){var t=this;e.preventDefault();var n=this.username.trim(),o=this.password.trim();if(n)if(o){var r="".concat("http://localhost:8000","/api/v1/users/login/");fetch(r,{method:"POST",body:JSON.stringify({username:n,password:o}),headers:{"Content-type":"application/json"}}).then((function(e){return 200!==e.status?500===e.status?Promise.reject({message:"Server error occured, refresh page and try again"}):Promise.reject({message:"Invalid login details provided"}):e.json()})).then((function(e){var n=e["refresh"],o=e["access"];t.auth.setRefreshToken(n),t.auth.setAccessToken(o),t.auth.setAccessTokenExpired(!1),t.$router.push("/")}),(function(e){t.notifier.danger(e["message"])})).catch((function(e){return console.log(e)}))}else this.notifier.danger("password cannot be empty");else this.notifier.danger("username cannot be empty")}}};const _e=B()(Je,[["render",He]]);var ze=_e,$e={name:"Login",components:{LoginForm:ze}};const Qe=B()($e,[["render",qe]]);var Ge=Qe;function Ye(e,t,n,r,i,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("h2",null,"404 not found")}var Ke={name:"PageNotFound"};const We=B()(Ke,[["render",Ye]]);var Xe=We,Ze=[{name:"Home",path:"/",component:z},{name:"SignUp",path:"/sign-up",component:Be},{name:"Login",path:"/login",component:Ge},{name:"PageNotFound",path:"/404",component:Xe},{name:"PageNotFound",path:"/:catchAll(.*)",component:Xe}],et=Object(f["a"])({history:Object(f["b"])("/"),routes:Ze}),tt=!1,nt=!1;et.beforeEach(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=rt(),nt){e.next=5;break}return e.next=4,o.performServerSideValidation();case 4:tt=e.sent;case 5:if("Home"!==t.name||tt){e.next=7;break}return e.abrupt("return",{name:"Login"});case 7:if("Login"!==t.name&&"SignUp"!==t.name||!tt){e.next=9;break}return e.abrupt("return",{name:"Home"});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var ot=et,rt=Object(d["b"])("authentication",{state:function(){return{userAuthenticated:!1}},actions:{runValidationRequestTimer:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;setTimeout((function(){e.setAccessTokenExpired(!0),e.userAuthenticated=!1}),6e4*t)},isAuthenticated:function(){var e=this.accessTokenExpired(),t=this.getAccessToken(),n=null===t||""===t.trim();return this.userAuthenticated=!n&&!e,this.userAuthenticated},performServerSideValidation:function(){var e=this,t=this.getRefreshToken();if(t){var n="".concat("http://localhost:8000","/api/v1/users/token/refresh/");return fetch(n,{method:"POST",body:JSON.stringify({refresh:t}),headers:{"Content-type":"application/json"}}).then((function(e){return 200!==e.status?Promise.reject(e.json()):e.json()})).then((function(t){return e.setAccessToken(t["access"]),e.setAccessTokenExpired(!1),e.userAuthenticated=!0,e.runValidationRequestTimer(),!0}),(function(t){m();return e.deleteAuthCredentials(),e.userAuthenticated=!1,ot.push("/login"),!1}))}return new Promise((function(e,t){return e(!1)}))},getRefreshToken:function(){return localStorage.getItem("refreshToken")},setRefreshToken:function(e){localStorage.setItem("refreshToken",e)},getAccessToken:function(){return localStorage.getItem("accessToken")},setAccessToken:function(e){localStorage.setItem("accessToken",e)},deleteAccessToken:function(){localStorage.removeItem("accessToken"),this.accessTokenExpired(!0)},deleteRefreshToken:function(){localStorage.removeItem("refreshToken")},accessTokenExpired:function(){var e=localStorage.getItem("accessTokenExpired");return null===e||"true"===e?(e=!0,localStorage.setItem("accessTokenExpired",!0)):"false"===e&&(e=!1),e},setAccessTokenExpired:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];localStorage.setItem("accessTokenExpired",e)},logout:function(){var e=this,t="".concat("http://localhost:8000","/api/v1/users/logout/"),n=this.getRefreshToken(),o=this.getAccessToken(),r=m();return fetch(t,{method:"POST",body:JSON.stringify({refresh:n}),headers:{Authorization:"Bearer ".concat(o),"Content-type":"application/json"}}).then((function(e){return 200!==e.status?Promise.reject({code:e.status}):e.json()})).then((function(t){e.deleteAuthCredentials(),e.setAccessTokenExpired(!0),e.userAuthenticated=!1,ot.push("/login")}),(function(e){var t=e["code"];t>=400&&t<500?r.danger("Error occured while logging out, wait a few seconds, refresh page and try again"):r.danger("Error occured, refresh page and try again")}))},deleteAuthCredentials:function(){this.deleteAccessToken(),this.deleteRefreshToken(),this.userAuthenticated=!1}}});function it(e,t,n,r,i,c){var a=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])(a,{to:n.path,class:"btn-action"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.name),1)]})),_:1},8,["to"])}var ct={name:"HeaderLink",props:{name:String,path:String}};const at=B()(ct,[["render",it]]);var st=at,ut={name:"Header",setup:function(){var e=rt();return{auth:e}},components:{HeaderLink:st},methods:{logout:function(){this.auth.logout()}},computed:{isAuthenticated:function(){return this.auth.userAuthenticated}},data:function(){return{headerLinks:"UnauthBtns"}}};const lt=B()(ut,[["render",l]]);var dt=lt;function mt(e,t,n,r,i,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("footer",null,[Object(o["createElementVNode"])("p",null,"Todo app © "+Object(o["toDisplayString"])(i.year),1)])}var pt={name:"Footer",data:function(){return{year:(new Date).getFullYear()}}};const ft=B()(pt,[["render",mt]]);var ht=ft,bt={class:"notifications"};function vt(e,t,n,r,i,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",bt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.notifier.notifications,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:e.id,class:Object(o["normalizeClass"])([e.type?e.type:"success","notification"])},[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.message),1)],2)})),128))])}var gt={name:"Notifications",setup:function(){var e=m();return{notifier:e}}};const jt=B()(gt,[["render",vt]]);var Ot=jt,kt={name:"App",setup:function(){var e=m();return{notifier:e}},methods:{doSomething:function(e){this.notifier.notify("Did something successful","success")}},components:{Header:dt,Footer:ht,Notifications:Ot}};const Tt=B()(kt,[["render",i]]);var Et=Tt;Object(o["createApp"])(Et).use(ot).use(Object(d["a"])()).mount("#app")}});
//# sourceMappingURL=app.3e9a2f0b.js.map