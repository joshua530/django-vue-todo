(function(e){function t(t){for(var o,i,a=t[0],s=t[1],u=t[2],d=0,m=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&m.push(r[i][0]),r[i]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);l&&l(t);while(m.length)m.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(c.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},c=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=s;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r={class:"container"};function c(e,t,n,c,i,a){var s=Object(o["resolveComponent"])("Header"),u=Object(o["resolveComponent"])("router-view"),l=Object(o["resolveComponent"])("Footer"),d=Object(o["resolveComponent"])("Notifications");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(s),Object(o["createElementVNode"])("div",r,[Object(o["createVNode"])(u)]),Object(o["createVNode"])(l),Object(o["createVNode"])(d)],64)}var i={class:"nav"},a={class:"branding"},s=Object(o["createTextVNode"])("Todo"),u={class:"nav-actions"};function l(e,t,n,r,c,l){var d=Object(o["resolveComponent"])("router-link"),m=Object(o["resolveComponent"])("HeaderLink");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",i,[Object(o["createElementVNode"])("div",a,[Object(o["createVNode"])(d,{to:"/"},{default:Object(o["withCtx"])((function(){return[s]})),_:1})]),Object(o["createElementVNode"])("div",u,[l.isAuthenticated?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,name:"Logout",onClick:t[0]||(t[0]=function(e){return l.logout()}),path:"#"})):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createVNode"])(m,{name:"Login",path:"/login"}),Object(o["createVNode"])(m,{name:"Sign up",path:"/sign-up"})],64))])])}n("498a"),n("d3b7"),n("e9c4");var d=n("be92"),m=(n("c740"),n("a434"),Object(d["b"])("notifications",{state:function(){return{notifications:[],notificationIndex:1}},actions:{notify:function(e,t){var n=this,o=this.notificationIndex;this.notifications.push({message:e,type:t,id:o}),++this.notificationIndex,setTimeout((function(){var e=n.notifications.findIndex((function(e){return e.id===o}));-1!==e&&n.notifications.splice(e,1)}),5e3)},success:function(e){this.notify(e,"success")},danger:function(e){this.notify(e,"danger")},info:function(e){this.notify(e,"info")},warning:function(e){this.notify(e,"warning")}}})),f=n("1da1"),p=(n("96cf"),n("b0c0"),n("6c02")),h={class:"container"},b={class:"container my-5"},v=Object(o["createElementVNode"])("div",{class:"container my-5"},[Object(o["createElementVNode"])("h5",{class:"text-underline"},"Today's quote"),Object(o["createElementVNode"])("p",null," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Atque recusandae minima libero! Totam tenetur vel nesciunt odio provident reiciendis, cupiditate nemo fugit incidunt repudiandae consequuntur sequi dolore inventore laboriosam amet! ")],-1);function j(e,t,n,r,c,i){var a=Object(o["resolveComponent"])("TodoContainer"),s=Object(o["resolveComponent"])("AddTodoForm");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",h,[Object(o["createVNode"])(a),Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("button",{title:"toggle add task form",onClick:t[0]||(t[0]=function(){return i.toggleTodo&&i.toggleTodo.apply(i,arguments)}),class:"btn-white"}," Add Task ")]),v,Object(o["createVNode"])(s,{ref:"addTodoForm"},null,512)])}var g={key:0,class:"modal"},O={class:"form-region"},k=Object(o["createElementVNode"])("label",{for:"task-name"},"Name",-1),T=Object(o["createElementVNode"])("button",{type:"submit",class:"add-task-btn waves-effect waves-light"},[Object(o["createElementVNode"])("span",{class:"fa fa-plus"})],-1);function E(e,t,n,r,c,i){return c.formVisible?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",g,[Object(o["createElementVNode"])("form",{id:"modal-form",onSubmit:t[2]||(t[2]=function(){return i.addTodoItem&&i.addTodoItem.apply(i,arguments)})},[Object(o["createElementVNode"])("div",O,[k,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{ref:"textBox",class:"todo-text",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.text=e}),id:"task-name"},null,512),[[o["vModelText"],c.text]]),T,Object(o["createElementVNode"])("span",{onClick:t[1]||(t[1]=function(e){return i.toggleVisibility()}),class:"fa fa-times close-todo-form"})])],32)])):Object(o["createCommentVNode"])("",!0)}var y,V=n("ade3"),w=n("5530"),N=(n("d81d"),Object(d["b"])("todoItems",{state:function(){return{todoItems:[],todosFetchedFromServer:!1}},getters:{todos:function(){return this.todoItems}},actions:{setTodos:function(e){this.todos=e},getTodosPromise:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Xe(),n="".concat("http://localhost:8000","/api/v1/todos/"),t.userAuthenticated){e.next=5;break}return e.next=5,t.performServerSideValidation();case 5:return o=t.getAccessToken(),e.abrupt("return",fetch(n,{method:"GET",headers:{Authorization:"Bearer ".concat(o)}}).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()})));case 7:case"end":return e.stop()}}),e)})))()},fetchTodos:function(){var e=this;this.todosFetchedFromServer||this.getTodosPromise().then((function(t){return e.todoItems=t}),(function(t){if(401===t){var n=Xe();n.performServerSideValidation().then(e.getTodosPromise().then((function(t){e.todoItems=t}),(function(e){})))}var o=m();o.danger("Error occured while fetching data. logout and try again")})).catch((function(e){return console.log(e)}))},addTodo:function(e){this.todoItems.push(e)},deleteTodo:function(e){var t=this.todoItems.findIndex((function(t){return t.id===e}));-1!==t&&this.todoItems.splice(t,1)},updateTodo:function(e,t){this.todoItems=this.todoItems.map((function(n){return n.id===e&&(n.done=t),n}))}}})),S=(y={setup:function(){var e=m(),t=Xe(),n=N();return{notifier:e,auth:t,todoStore:n}},name:"AddTodoForm",data:function(){return{text:""}}},Object(V["a"])(y,"data",(function(){return{formVisible:!1}})),Object(V["a"])(y,"methods",{toggleVisibility:function(){var e=this;this.formVisible=!this.formVisible,this.formVisible&&setTimeout((function(){e.$refs.textBox.focus()}),200)},postTodoItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=t.auth.getAccessToken(),r="".concat("http://localhost:8000","/api/v1/todo/"),n.abrupt("return",fetch(r,{method:"POST",body:JSON.stringify({name:e}),headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(e){return 200!==e.status?Promise.reject(e.status):e.json()})));case 3:case"end":return n.stop()}}),n)})))()},addTodoItem:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.preventDefault(),o=t.text.trim(),o||t.notifier.danger("Todo name cannot be empty"),!t.auth.accessTokenExpired()){n.next=6;break}return n.next=6,t.auth.performServerSideValidation();case 6:t.postTodoItem(o).then((function(e){var n=Object(w["a"])({},e);t.todoStore.addTodo(n),t.text=""}),(function(e){401===e&&t.auth.performServerSideValidation().then((function(){t.postTodoItem(o).then((function(e){var n=Object(w["a"])({},e);t.todoStore.addTodo(n),t.text=""}),(function(e){t.notifier.danger("Todo item addition failed")}))}))})).catch((function(e){return console.log(e)}));case 7:case"end":return n.stop()}}),n)})))()}}),y),x=n("6b0d"),B=n.n(x);const A=B()(S,[["render",E]]);var C=A,I={class:"container my-5"};function q(e,t,n,r,c,i){var a=Object(o["resolveComponent"])("Todo");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",I,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(c.todos,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(a,{key:e.id,name:e.name,done:e.done,id:e.id},null,8,["name","done","id"])})),128))])}var P={class:"markers"};function F(e,t,n,r,c,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{class:Object(o["normalizeClass"])(["todo-item",n.done?"todo-item-done":"todo-item-undone"])},[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(n.name),1),Object(o["createElementVNode"])("p",P,[n.done?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:0,title:"mark as undone",class:"fa fa-check cursor-pointer",onClick:t[0]||(t[0]=function(e){return i.updateTodo()})})):Object(o["createCommentVNode"])("",!0),n.done?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:1,title:"mark as done",class:"fa fa-clock cursor-pointer",onClick:t[1]||(t[1]=function(e){return i.updateTodo()})})),Object(o["createElementVNode"])("i",{title:"delete item",class:"fa fa-times delete-task",onClick:t[2]||(t[2]=function(e){return i.deleteTodo()})})])],2)}n("a9e3"),n("99af");var L={setup:function(){return{todoStore:N(),auth:Xe(),notifier:m()}},name:"Todo",props:{name:{type:String,required:!0},done:{type:Boolean,required:!0},id:{type:Number,required:!0}},methods:{performServerRequest:function(e){var t=this,n=e.toLowerCase(),o="update"===n?"PUT":"DELETE",r="".concat("http://localhost:8000","/api/v1/todo/").concat(this.id,"/"),c=this.auth.getAccessToken();fetch(r,{method:o,headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c)}}).then((function(e){return 200!==e.status?Promise.reject({message:"Error occured while updating todo item"}):e.json()})).then((function(e){"update"===n?t.todoStore.updateTodo(e.id,e.done):t.todoStore.deleteTodo(t.id)}),(function(e){t.notifier.danger(e.message)}))},updateTodo:function(){var e=this;this.auth.accessTokenExpired()?this.auth.performServerSideValidation().then((function(){e.performServerRequest("update")})):this.performServerRequest("update")},deleteTodo:function(){var e=this;this.auth.accessTokenExpired()?this.auth.performServerSideValidation().then((function(){e.performServerRequest("delete")})):this.performServerRequest("delete")}}};const R=B()(L,[["render",F]]);var U=R,D={setup:function(){var e=N();return e.fetchTodos(),{todoStore:e}},name:"TodoContainer",components:{Todo:U},created:function(){var e=this;this.todoStore.$subscribe((function(t,n){e.todos=n.todoItems}))},data:function(){return{todos:[]}}};const M=B()(D,[["render",q]]);var H=M,_={name:"Home",components:{AddTodoForm:C,TodoContainer:H},methods:{toggleTodo:function(){this.$refs.addTodoForm.toggleVisibility()}}};const J=B()(_,[["render",j]]);var z=J,$=(n("fb6a"),{class:"row ml-4"}),Q={class:"col l4"},G=Object(o["createElementVNode"])("div",{class:"col l1"},null,-1),Y={class:"col l7"},K=Object(o["createElementVNode"])("h4",null,"Testimonials",-1),W={class:"row ml-2"},X={key:0},Z=Object(o["createElementVNode"])("span",{class:"fa fa-spinner fa-pulse fa-2x"},null,-1),ee=[Z],te={class:"header"},ne=["src","alt"],oe={class:"content"},re=Object(o["createStaticVNode"])('<div class="fun-facts ml-4"><h5 class="text-underline">Information on setting goals</h5><div class="row"><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote></div><div class="row"><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote><blockquote class="section col m4 my-3"> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Temporibus dolor accusantium nesciunt inventore ex fugit </blockquote></div></div>',1);function ce(e,t,n,r,c,i){var a=Object(o["resolveComponent"])("SignUpForm");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",Q,[Object(o["createVNode"])(a)]),G,Object(o["createElementVNode"])("div",Y,[K,Object(o["createElementVNode"])("div",W,[c.data?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",X,ee)),c.data?(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],{key:1},Object(o["renderList"])(c.data,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:e.id,class:"testimonial col"},[Object(o["createElementVNode"])("div",te,[Object(o["createElementVNode"])("img",{class:"testimonial-image",src:e.avatar,alt:[e.name,"-image"]},null,8,ne)]),Object(o["createElementVNode"])("div",oe,[Object(o["createElementVNode"])("h6",null,Object(o["toDisplayString"])(e.name),1),Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.message.slice(0,68))+"...",1)])])})),128)):Object(o["createCommentVNode"])("",!0)])])]),re],64)}var ie={class:"login-form"},ae=Object(o["createElementVNode"])("h5",{class:"text-underline"},"Sign up",-1),se={class:"form-section"},ue=Object(o["createElementVNode"])("label",{for:"username"},"Username",-1),le={class:"form-section"},de=Object(o["createElementVNode"])("label",{for:"email"},"Email",-1),me={class:"form-section"},fe=Object(o["createElementVNode"])("label",{for:"password"},"Password",-1),pe={class:"form-section"},he=Object(o["createElementVNode"])("label",{for:"password-confirmation"},"Confirm Password",-1),be=Object(o["createElementVNode"])("button",{class:"btn-white"},"Submit",-1);function ve(e,t,n,r,c,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ie,[ae,Object(o["createElementVNode"])("form",{onSubmit:t[4]||(t[4]=function(){return i.createUser&&i.createUser.apply(i,arguments)})},[Object(o["createElementVNode"])("div",se,[ue,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return c.username=e}),name:"username",id:"username"},null,512),[[o["vModelText"],c.username]])]),Object(o["createElementVNode"])("div",le,[de,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.email=e}),name:"email",id:"email"},null,512),[[o["vModelText"],c.email]])]),Object(o["createElementVNode"])("div",me,[fe,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.password=e}),name:"password",id:"password"},null,512),[[o["vModelText"],c.password]])]),Object(o["createElementVNode"])("div",pe,[he,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.passwordConfirmation=e}),type:"password",name:"password-confirmation",id:"password-confirmation"},null,512),[[o["vModelText"],c.passwordConfirmation]])]),be],32)])}var je=n("b85c"),ge={name:"SignUpForm",setup:function(){return{notifier:m()}},data:function(){return{username:"",email:"",password:"",passwordConfirmation:""}},methods:{createUser:function(e){var t=this;e.preventDefault();var n=this.username.trim(),o=this.email.trim(),r=this.password.trim(),c=this.passwordConfirmation.trim();if(n)if(n.length<3)this.notifier.danger("username must be at least 3 characters long");else if(o)if(r)if(r.length<5)this.notifier.danger("password length cannot be less than five");else if(r===c){var i={username:n,email:o,password:r},a="".concat("http://localhost:8000","/api/v1/users/sign-up/");fetch(a,{method:"POST",body:JSON.stringify(i),headers:{"Content-type":"application/json"}}).then((function(e){return 201!==e.status&&200!==e.status?Promise.reject(e.json()):e.json()})).then((function(e){t.notifier.success("Account creation successful, login to proceed"),t.$router.push("/login")}),(function(e){e.then((function(e){for(var n in e){var o=e[n];if("string"!==typeof o){var r,c=Object(je["a"])(o);try{for(c.s();!(r=c.n()).done;){var i=r.value;t.notifier.danger(i)}}catch(a){c.e(a)}finally{c.f()}}else t.notifier.danger(o)}}))})).catch((function(e){return console.log(e)}))}else this.notifier.danger("confirmation password does not match the password");else this.notifier.danger("password cannot be empty");else this.notifier.danger("email cannot be empty");else this.notifier.danger("username cannot be empty")}}};const Oe=B()(ge,[["render",ve]]);var ke=Oe,Te=Object(V["a"])({name:"SignUp",components:{SignUpForm:ke},setup:function(){return{notifier:m()}},data:function(){return{imageApi:"http://localhost:3000"}},methods:{getTestimonials:function(){return Object(f["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="https://testimonialapi.toolcarton.com/api",n={method:"GET",redirect:"follow"},e.abrupt("return",fetch(t,n).then((function(e){return e.json()})));case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){var e=this;this.getTestimonials().then((function(t){e.data=t.slice(1,4)}))}},"data",(function(){return{data:null}}));const Ee=B()(Te,[["render",ce]]);var ye=Ee,Ve={class:"row container"},we={class:"col l5"},Ne=Object(o["createStaticVNode"])('<div class="col l2"></div><div class="col l5"><div class="quotes-banner"><h5 class="text-underline">Quotes</h5><div class="section"><blockquote> Lorem, ipsum dolor sit amet consectetur adipisicing elit. Quam perferendis quia nesciunt molestias error recusandae aperiam rerum sapiente iure mollitia, similique, atque rem. Alias, veniam? Incidunt expedita laborum optio inventore! </blockquote></div><div class="section"><blockquote> Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quam inventore corporis culpa perspiciatis, voluptas quod error id odit quo ipsam, dicta adipisci vero minus. Asperiores ad vitae expedita eius ipsum! </blockquote></div></div></div>',2);function Se(e,t,n,r,c,i){var a=Object(o["resolveComponent"])("LoginForm");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ve,[Object(o["createElementVNode"])("div",we,[Object(o["createVNode"])(a)]),Ne])}var xe={class:"login-form"},Be=Object(o["createElementVNode"])("h5",{class:"text-underline"},"Log in to continue",-1),Ae={class:"form-section"},Ce=Object(o["createElementVNode"])("label",{for:"username"},"Username",-1),Ie={class:"form-section"},qe=Object(o["createElementVNode"])("label",{for:"password"},"Password",-1),Pe=Object(o["createElementVNode"])("button",{class:"btn-white"},"Submit",-1);function Fe(e,t,n,r,c,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",xe,[Be,Object(o["createElementVNode"])("form",{onSubmit:t[2]||(t[2]=function(){return i.logIn&&i.logIn.apply(i,arguments)})},[Object(o["createElementVNode"])("div",Ae,[Ce,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.username=e}),type:"text",name:"username",id:"username"},null,512),[[o["vModelText"],c.username]])]),Object(o["createElementVNode"])("div",Ie,[qe,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.password=e}),type:"password",name:"password",id:"password"},null,512),[[o["vModelText"],c.password]])]),Pe],32)])}var Le={setup:function(){return{notifier:m(),auth:Xe()}},name:"LoginForm",data:function(){return{username:"",password:""}},methods:{logIn:function(e){var t=this;e.preventDefault();var n=this.username.trim(),o=this.password.trim();if(n)if(o){var r="".concat("http://localhost:8000","/api/v1/users/login/");fetch(r,{method:"POST",body:JSON.stringify({username:n,password:o}),headers:{"Content-type":"application/json"}}).then((function(e){return 200!==e.status?500===e.status?Promise.reject({message:"Server error occured, refresh page and try again"}):Promise.reject({message:"Invalid login details provided"}):e.json()})).then((function(e){var n=e["refresh"],o=e["access"];t.auth.setRefreshToken(n),t.auth.setAccessToken(o),t.auth.setAccessTokenExpired(!1),t.$router.push("/")}),(function(e){t.notifier.danger(e["message"])})).catch((function(e){return console.log(e)}))}else this.notifier.danger("password cannot be empty");else this.notifier.danger("username cannot be empty")}}};const Re=B()(Le,[["render",Fe]]);var Ue=Re,De={name:"Login",components:{LoginForm:Ue}};const Me=B()(De,[["render",Se]]);var He=Me;function _e(e,t,n,r,c,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("h2",null,"404 not found")}var Je={name:"PageNotFound"};const ze=B()(Je,[["render",_e]]);var $e=ze,Qe=[{name:"Home",path:"/",component:z},{name:"SignUp",path:"/sign-up",component:ye},{name:"Login",path:"/login",component:He},{name:"PageNotFound",path:"/404",component:$e},{name:"PageNotFound",path:"/:catchAll(.*)",component:$e}],Ge=Object(p["a"])({history:Object(p["b"])("/"),routes:Qe}),Ye=!1,Ke=!1;Ge.beforeEach(function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t,n){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=Xe(),Ke){e.next=5;break}return e.next=4,o.performServerSideValidation();case 4:Ye=e.sent;case 5:if("Home"!==t.name||Ye){e.next=7;break}return e.abrupt("return",{name:"Login"});case 7:if("Login"!==t.name&&"SignUp"!==t.name||!Ye){e.next=9;break}return e.abrupt("return",{name:"Home"});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var We=Ge,Xe=Object(d["b"])("authentication",{state:function(){return{userAuthenticated:!1}},actions:{runValidationRequestTimer:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;setTimeout((function(){e.setAccessTokenExpired(!0),e.userAuthenticated=!1}),6e4*t)},isAuthenticated:function(){var e=this.accessTokenExpired(),t=this.getAccessToken(),n=null===t||""===t.trim();return this.userAuthenticated=!n&&!e,this.userAuthenticated},performServerSideValidation:function(){var e=this,t=this.getRefreshToken();if(t){var n="".concat("http://localhost:8000","/api/v1/users/token/refresh/");return fetch(n,{method:"POST",body:JSON.stringify({refresh:t}),headers:{"Content-type":"application/json"}}).then((function(e){return 200!==e.status?Promise.reject(e.json()):e.json()})).then((function(t){return e.setAccessToken(t["access"]),e.setAccessTokenExpired(!1),e.userAuthenticated=!0,e.runValidationRequestTimer(),!0}),(function(t){m();return e.deleteAuthCredentials(),e.userAuthenticated=!1,We.push("/login"),!1}))}return new Promise((function(e,t){return e(!1)}))},getRefreshToken:function(){return localStorage.getItem("refreshToken")},setRefreshToken:function(e){localStorage.setItem("refreshToken",e)},getAccessToken:function(){return localStorage.getItem("accessToken")},setAccessToken:function(e){localStorage.setItem("accessToken",e)},deleteAccessToken:function(){localStorage.removeItem("accessToken"),this.accessTokenExpired(!0)},deleteRefreshToken:function(){localStorage.removeItem("refreshToken")},accessTokenExpired:function(){var e=localStorage.getItem("accessTokenExpired");return null===e||"true"===e?(e=!0,localStorage.setItem("accessTokenExpired",!0)):"false"===e&&(e=!1),e},setAccessTokenExpired:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];localStorage.setItem("accessTokenExpired",e)},logout:function(){var e=this,t="".concat("http://localhost:8000","/api/v1/users/logout/"),n=this.getRefreshToken(),o=this.getAccessToken(),r=m();return fetch(t,{method:"POST",body:JSON.stringify({refresh:n}),headers:{Authorization:"Bearer ".concat(o),"Content-type":"application/json"}}).then((function(e){return 200!==e.status?Promise.reject({code:e.status}):e.json()})).then((function(t){e.deleteAuthCredentials(),e.setAccessTokenExpired(!0),e.userAuthenticated=!1,We.push("/login")}),(function(e){var t=e["code"];t>=400&&t<500?r.danger("Error occured while logging out, wait a few seconds, refresh page and try again"):r.danger("Error occured, refresh page and try again")}))},deleteAuthCredentials:function(){this.deleteAccessToken(),this.deleteRefreshToken(),this.userAuthenticated=!1}}});function Ze(e,t,n,r,c,i){var a=Object(o["resolveComponent"])("router-link");return Object(o["openBlock"])(),Object(o["createBlock"])(a,{to:n.path,class:"btn-action"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(n.name),1)]})),_:1},8,["to"])}var et={name:"HeaderLink",props:{name:String,path:String}};const tt=B()(et,[["render",Ze]]);var nt=tt,ot={name:"Header",setup:function(){var e=Xe();return{auth:e}},components:{HeaderLink:nt},methods:{logout:function(){this.auth.logout()}},computed:{isAuthenticated:function(){return this.auth.userAuthenticated}},data:function(){return{headerLinks:"UnauthBtns"}}};const rt=B()(ot,[["render",l]]);var ct=rt;function it(e,t,n,r,c,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("footer",null,[Object(o["createElementVNode"])("p",null,"Todo app © "+Object(o["toDisplayString"])(c.year),1)])}var at={name:"Footer",data:function(){return{year:(new Date).getFullYear()}}};const st=B()(at,[["render",it]]);var ut=st,lt={class:"notifications"};function dt(e,t,n,r,c,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",lt,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.notifier.notifications,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:e.id,class:Object(o["normalizeClass"])([e.type?e.type:"success","notification"])},[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(e.message),1)],2)})),128))])}var mt={name:"Notifications",setup:function(){var e=m();return{notifier:e}}};const ft=B()(mt,[["render",dt]]);var pt=ft,ht={name:"App",setup:function(){var e=m();return{notifier:e}},methods:{doSomething:function(e){this.notifier.notify("Did something successful","success")}},components:{Header:ct,Footer:ut,Notifications:pt}};const bt=B()(ht,[["render",c]]);var vt=bt;Object(o["createApp"])(vt).use(We).use(Object(d["a"])()).mount("#app")}});
//# sourceMappingURL=app.dd6482f1.js.map